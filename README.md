## IntelliNullBot

 <a href="https://t.me/IntelliNullBot">
		<img src="https://img.shields.io/badge/Click%20TO%20USE%20BOT-blue?style=for-the-badge&logo=telegram&logoColor=white" alt="Telegram"/>
	</a>

Простой телеграмм бот способный выполнять несколько весьма полезных функций.

---

### Функционал

Бот имеет следующий функционал:

- получение прогноза погоды в любом городе
- перевод с русского на английский и с английского на русский
- решение математических выражений
- "мем дня" в области IT
- история использования бота

---

### Описание команд и примеры использования

#### Weather :sun_behind_rain_cloud:

Нажатие на эту кнопку предложит вам отправить боту название нужного города на английском или русском языке. В ответ вы получите прогноз погоды на три дня. Также работает с кодами аэропортов.

<details> 
 <summary><h4>Пример использования</h4></summary>
 <img src="https://psv4.userapi.com/c240331/u387787987/docs/d37/41597ca7f9fc/weather.gif?extra=Mi18HJAC1f90V8fBN05-VyotshAa7ZlZA3-T43fHYpBKnX0Sf7RpAJAaKg53nAgMI4uTeWZOCI3iqucGO8Zg_D6C6MXb-im2eBo19U2IM27KKNulFkRe2mDElo3MLK5GoKqafpXv8TfMZ9FGk9QHnzrjpw"/>
</details>

---

#### Translate :page_facing_up:

Нажатие на эту кнопку предложит вам отправить боту текст для перевода на русском или английском языке.

<details> 
 <summary><h4>Пример использования</h4></summary>
 <img src="https://sun9-36.userapi.com/c240331/u387787987/docs/d40/098ff6ed2b90/translate.gif?extra=p_An6sip81M25kwKFsumOCKt-1SkGvhvyNBAs7MpcBTLB5_tZMnuwYvSfiUvf7yQgZYasIeEWK8FvgVkvDVmEI7v87pnpzNFzV52IB5xeJs-FA2gMnm166OIzSsiyhVvz5SZtrbGMwu4zyG367X8I5YQnQ"/>
</details>

---

#### Meme :chicken:

Нажав на эту кнопку вы получите случайный мем из области IT.

<details> 
 <summary><h4>Пример использования</h4></summary>
 <img src="https://psv4.userapi.com/c240331/u387787987/docs/d24/9e485065ebff/meme.gif?extra=JaZx6fxTrejLLnAZ0qIrGD1_LoiRl8BJHAdwEy_Rbev8E0T_-fnZynAuETIfmMBSTnmCyuFN7ETskO1qXZWTj0eacmNg4OyPuNgjmjJSWgxcDsEqBxeROmzxX6G-Jf-u68sFGOGizIEZfMhNyrLocxoDmg"/>
</details>

---

#### Calculator :1234:

Нажатие на эту кнопку предложит вам ввести математическое выражение. Можно использовать сложение, вычитание, умножение, деление, возведение в степень, скобки.

<details> 
 <summary><h4>Пример использования</h4></summary>
 <img src="https://psv4.userapi.com/c240331/u387787987/docs/d58/39ad5b564a4c/calc.gif?extra=UxDypuHNUYHOxAmZX0P3h04zRvL8fdutMNvAdfy26Ia3k5D38zr68dBHw_hIXCTh-rhbTQUVOEy24S9VlzrJJf7o5vMZ0SVmdeVp93Ei2u_-Vh-T9Ymfe6DaMnsrgJOsCOCPHhZiZUcH5dAhV-kNAzETCQ"/>
</details>

---

#### History :telescope:

Нажав эту кнопку вы получите список из последних 10 использованных вами комманд.

<details> 
 <summary><h4>Пример использования</h4></summary>
 <img src="https://psv4.userapi.com/c240331/u387787987/docs/d16/09b81bb99220/history.gif?extra=8hZ21Y90BGC6WG9uk0AHw1yJxSqUvQjZmun1NYqPGEFaQfRn2BockqW-0EQ8gHVcY1eeCVjMdlDerTjq-LibiMoOxZ7slM-TUz6Qz-4830njeFRXDgsrWuKE4yPCjc5f7LVf19Nk2H_oAFzaMx-d6N5Utg"/>
</details>

---

#### About :question:

Нажатие на эту кнопку выведет немного информации о боте: количество обработанных за всё время комманд, количество пользователей и ссылку на телеграмм автора.

<details> 
 <summary><h4>Пример использования</h4></summary>
 <img src="https://sun9-69.userapi.com/c240331/u387787987/docs/d39/19c45335e7ea/about.gif?extra=u75TIxOmvgeNG_J1idAqTqr7BwwoM1tW1FnHiikDidgsMdVQDZlwmJtSwXwIt3DR_pMaaRILlBzfUGhcpS69zavYmp9sXvpyE85DzPa28d7RUz8R_wN8rg4AvTQWWwfvlf2jgkfzFfwo7f57iit4trZ3sQ"/>
</details>

---

### Инструкция по запуску приложения

**Перед запуском**

1. В программе используется внешняя база данных. Убедитесь, что у вас установлена PostgreSQL.
2. Создайте базу данных. Измените параметры в файле _application.properties_, если они отличаются от тех что использовались ранее.
```
spring.datasource.url=jdbc:postgresql://localhost:5432/telegram
spring.datasource.username=postgres
spring.datasource.password=admin
```
2.1. Возможно использование встроенной или in-memory базы данных. Тогда настройки БД будут такие: 
```
spring.datasource.url=jdbc:h2:mem:telegram
spring.datasource.username=admin
spring.datasource.password=admin
```
3. Таблицы автоматически создаются при запуске с помощью скрипта schema.sql.


<details> 
 <summary><h4>schema.sql</h4></summary>

* таблица для хранения данных о пользователях

```SQL
CREATE TABLE IF NOT EXISTS users (
	id BIGINT GENERATED BY DEFAULT AS IDENTITY,
	chat_id BIGINT NOT NULL PRIMARY KEY,
	first_name VARCHAR(255),
	last_name VARCHAR(255),
	user_name VARCHAR(255),
	registered TIMESTAMP
);
```
* таблица для хранения данных о совершенных командах
```SQL
CREATE TABLE IF NOT EXISTS bot_calls (
	id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	chat_id BIGINT,
	command VARCHAR(255),
	text VARCHAR(255),
	called_at TIMESTAMP,
	is_complete boolean,
    FOREIGN KEY (chat_id) REFERENCES users (chat_id)
);
```
</details>

---

**С помощью IntelliJ IDEA**

1. Склонируйте и откройте репозиторий:

```
File -> New -> Project from version control -> paste URL -> clone
```

2. Скачайте все необходимые зависимости, если этого не произошло автоматически:

```
Maven -> Reload project
```

3. Запустите приложение, используя кнопку Run или сочетание клавиш shift+f10.
4. Готово! Приложение запущено. Подробная информация в логах.

---

**С помощью терминала**

1. Склонируйте репозиторий:

```
git clone https://github.com/isthatkirill/intelli-null-tg-bot/
```

2. Перейдите в директорию с репозиторием:

```
cd intelli-null-tg-bot
```

3. Установите [maven](https://maven.apache.org/download.cgi) с официального сайта, если у вас нет его на компьютере. Проверить его наличие можно выполнив команду:

```
mvn -version
```

4. Запустите приложение, выполнив команду:

```
mvn spring-boot:run
```

5. Готово! Приложение запущено. Подробная информация в логах.

---

### Перенос функционала на собственного бота

Для создания собственного бота с представленным функционалом выполните следующие шаги:

1. Создайте нового бота через @botfather - официальный инструмент от telegram для регистрации и настройки ботов. Вам нужно будет указать псевдоним и отображаемое имя для бота. После этого придет ответное сообщение с API-ключом.

2. Замените старый API-ключ на ваш в файле _application.properties_.

```
bot.token = {ваш API-ключ}
```

3. Готово! Запустите приложение!

> Учтите, что часть функций бота реализованна через обращение к сторонним сервисам. Взаимодействие с ними также происходит посредством API-ключа (на который есть ограничение по количеству запросов или времени использования). Возможно, понадобиться обновить текущие API-ключи, используемые сервисными классами.

---

### Использумые технологии и библиотеки

- Java _(11)_
- Spring Boot _(2.7.13)_
- Spring Data JDBC _(2.7.13)_
- Telegrambots API _(6.4.0)_
- PostgreSQL _(15)_
- Lombok _(1.18.26)_
- JSON _(20230227)_
- Emoji Java _(5.1.1)_
- JSoup library _(1.15.3)_
- JEP _(2.4.0)_
- Apache Commons IO _(2.11.0)_
